!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a("9LQ4c"),a("hOsrK"),a("6Yg2l");var i=a("bpxeT"),c=a("2TvXO"),o=a("hOsrK"),l=a("8nrFW"),s=localStorage.getItem("switcher-period")||"week";var u=a("4wcYQ"),d=a("fiCwh");v(1);var f=function(){u.paginator.callback=v};function v(){return p.apply(this,arguments)}function p(){return p=e(i)(e(c).mark((function t(){var n,r,a=arguments;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:1,e.prev=1,e.next=4,(0,o.getTrending)(n,s);case 4:r=e.sent,(0,d.makeGallery)(r.results),u.paginator.currentPage=r.page,u.paginator.totalPages=r.total_pages,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),t,null,[[1,10]])}))),p.apply(this,arguments)}f();i=a("bpxeT"),c=a("2TvXO"),o=a("hOsrK"),u=a("4wcYQ");var g,h=a("kI89v"),_=(d=a("fiCwh"),new(0,h.LoadSpinner)({selector:'[data-action="loading"]'})),m=document.querySelector(".search-form"),y=document.querySelector(".search-result"),w="",b=function(e){k(w,e)},k=(g=e(i)(e(c).mark((function t(n,r){var a,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.enable(),e.next=4,(0,o.getMoviesByKeyword)({keyword:n,page:r});case 4:(null==(i=e.sent)||null===(a=i.results)||void 0===a?void 0:a.length)?((0,d.makeGallery)(i.results),y.textContent="",w=n,u.paginator.callback=b,u.paginator.currentPage=i.page,u.paginator.totalPages=i.total_pages):(y.textContent="Search result not successful. Enter the correct movie name and try again.",x()),_.disable();case 7:case"end":return e.stop()}}),t)}))),function(e,t){return g.apply(this,arguments)});m.addEventListener("submit",(function(e){e.preventDefault();var t=e.target["search-film"].value.trim();t?k(t,1):(y.textContent="Movie name must not be empty. Please, enter movie name to search.",x())}));var x=function(){setTimeout((function(){y.textContent=""}),3e3)};a("7uZ1r");var S=a("hdbOA"),L=document.querySelector(".filter__list");function T(e){e.target.classList.toggle("active"),L.classList.toggle("is-hidden");var t=JSON.parse(localStorage.getItem("genres")).map((function(e){var t=e.id,n=e.name;return'<li class="filter__item"><button class="filter__option" type="button" data-id="'.concat(t,'">').concat(n,"</button></li>")})).join("");L.innerHTML=t,L.addEventListener("click",q)}function q(e){if("BUTTON"===e.target.nodeName)try{!function(e){var t=document.querySelector(".filter__option.active");t&&t.classList.remove("active"),e.target.classList.add("active")}(e),(0,S.updateGenreId)(e.target.dataset.id),(0,S.searchByGenre)(1)}catch(e){}}a("jUlpL"),a("k6LBo"),a("dt3WK"),a("j61u5");document.querySelector(".gallery").insertAdjacentHTML("beforebegin",'\n<div class="gallery__settings">\n  <div class="gallery__settings-container">\n    <button class="filter__button" type="button">Select genre</button>\n  </div>\n  <ul class="filter__list is-hidden"></ul>\n</div>'),function(t){t.insertAdjacentHTML("beforeend",'<div class="switcher__container">\n    <span class="switcher__text">Trending of the</span>\n        <div class="switcher">\n          <div class="switcher__item">\n            <input\n              type="radio"\n              id="day"\n              value="day"\n              name="switcher"\n              class="switcher__item-radio"\n            />\n            <label for="day" class="switcher__item-label">\n              Day\n            </label>\n          </div>\n          <div class="switcher__item">\n            <input\n              type="radio"\n              id="week"\n              value="week"\n              name="switcher"\n              class="switcher__item-radio"\n            />\n            <label for="week" class="switcher__item-label">\n              Week\n            </label>\n          </div>\n        </div>\n    </div>');var n=document.querySelector(".switcher"),r=n.querySelectorAll(".switcher__item-radio");n.addEventListener("click",(function(t){var n=e(l)(r).find((function(e){return!e.checked}));n.checked=!0,s=n.value,localStorage.setItem("switcher-period",s),f(),v(1)})),e(l)(r).find((function(e){return e.value===s})).checked=!0}(document.querySelector(".gallery__settings-container")),L=document.querySelector(".filter__list"),document.querySelector(".filter__button").addEventListener("click",T)}();
//# sourceMappingURL=index.8495a0ed.js.map
