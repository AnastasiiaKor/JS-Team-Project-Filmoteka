{"mappings":"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","sources":["src/index.js","src/main.js/trending.js","src/main.js/templates.js/trending-switcher.js","src/main.js/search.js","src/main.js/filter.js","src/main.js/templates.js/gallery-settigs.js"],"sourcesContent":["import './main.js/preloader';\nimport './main.js/requests';\nimport './main.js/save-genres';\nimport './main.js/trending';\nimport './main.js/search';\nimport './main.js/modal';\nimport './main.js/filter';\nimport './main.js/user-manager';\nimport './main.js/theme-switcher';\nimport './main.js/footer-modal';\nimport './main.js/back-to-top';\nimport './main.js/templates.js/gallery-settigs';\n","import { getTrending } from './requests';\nimport { period, createSwitcherMarkup } from './templates.js/trending-switcher';\nimport { paginator } from './paginator';\nimport { makeGallery } from './make-gallery';\n\n\nshowTrending(1);\n\nexport const setTrendingCallback = () => {\n  paginator.callback = showTrending;\n}\n\nexport async function showTrending(page = 1) {\n  try {\n    const data = await getTrending(page, period);\n    makeGallery(data.results);\n/*     addGallerySettings(); */\n    paginator.currentPage = data.page;\n    paginator.totalPages = data.total_pages;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nsetTrendingCallback();","let period = localStorage.getItem('switcher-period') || 'week';\nimport { showTrending, setTrendingCallback } from '../trending';\n\nfunction createSwitcherMarkup(container) {\n  const markup = `<div class=\"switcher__container\">\n    <span class=\"switcher__text\">Trending of the</span>\n        <div class=\"switcher\">\n          <div class=\"switcher__item\">\n            <input\n              type=\"radio\"\n              id=\"day\"\n              value=\"day\"\n              name=\"switcher\"\n              class=\"switcher__item-radio\"\n            />\n            <label for=\"day\" class=\"switcher__item-label\">\n              Day\n            </label>\n          </div>\n          <div class=\"switcher__item\">\n            <input\n              type=\"radio\"\n              id=\"week\"\n              value=\"week\"\n              name=\"switcher\"\n              class=\"switcher__item-radio\"\n            />\n            <label for=\"week\" class=\"switcher__item-label\">\n              Week\n            </label>\n          </div>\n        </div>\n    </div>`;\n\n  container.insertAdjacentHTML('beforeend', markup);\n  const switcher = document.querySelector('.switcher');\n  const options = switcher.querySelectorAll('.switcher__item-radio');\n\n  switcher.addEventListener('click', addSwitcher);\n  [...options].find(option => option.value === period).checked = true;\n\n  function addSwitcher(e) {\n    const optionToSelect = [...options].find(option => !option.checked);\n    optionToSelect.checked = true;\n\n    period = optionToSelect.value;\n\n    localStorage.setItem('switcher-period', period);\n    setTrendingCallback();\n    showTrending(1);\n  }\n}\n\nexport { period, createSwitcherMarkup };\n","import { getMoviesByKeyword } from './requests';\nimport { paginator } from './paginator';\nimport { LoadSpinner } from './loader';\nimport { makeGallery } from './make-gallery';\n\nconst loadSpinnerBtn = new LoadSpinner({ selector: '[data-action=\"loading\"]' });\nconst headerForm = document.querySelector('.search-form');\nconst searchResult = document.querySelector('.search-result');\nconst WARNING_CLEAR_DELAY = 3000;\nlet lastQuery = '';\nconst searchMore = n => {\n  getMovies(lastQuery, n);\n};\nconst getMovies = async (query, page) => {\n  loadSpinnerBtn.enable();\n  let searched = await getMoviesByKeyword({\n    keyword: query,\n    page,\n  });\n  if (searched?.results?.length) {\n    makeGallery(searched.results);\n    searchResult.textContent = '';\n    lastQuery = query;\n    paginator.callback = searchMore;\n    paginator.currentPage = searched.page;\n    paginator.totalPages = searched.total_pages;\n  } else {\n    searchResult.textContent =\n      'Search result not successful. Enter the correct movie name and try again.';\n    clearInfo();\n  }\n  loadSpinnerBtn.disable();\n};\n\n\nconst onSearch = event => {\n  event.preventDefault();\n\n  const value = event.target['search-film'].value.trim();\n  if (value) {\n    getMovies(value, 1);\n  } else {\n    searchResult.textContent =\n      'Movie name must not be empty. Please, enter movie name to search.';\n    clearInfo();\n  }\n};\n\nheaderForm.addEventListener('submit', onSearch);\n\nconst clearInfo = () => {\n  setTimeout(() => {\n    searchResult.textContent = '';\n  }, WARNING_CLEAR_DELAY);\n};\n","import { searchByGenre, updateGenreId } from './get-movies-by-genre';\n\nlet options = document.querySelector('.filter__list');\nlet filterBtn;\nlet genreID;\n\nfunction addFilter() {\n  options = document.querySelector('.filter__list');\n  filterBtn = document.querySelector('.filter__button');\n  filterBtn.addEventListener('click', showHideFilter);\n}\n\nfunction showHideFilter(e) {\n  e.target.classList.toggle('active');\n  options.classList.toggle('is-hidden');\n  const genresList = JSON.parse(localStorage.getItem('genres'));\n  const optionsMarkup = genresList\n    .map(\n      ({ id, name }) =>\n        `<li class=\"filter__item\"><button class=\"filter__option\" type=\"button\" data-id=\"${id}\">${name}</button></li>`\n    )\n    .join('');\n  options.innerHTML = optionsMarkup;\n  options.addEventListener('click', showFilteredMovies);\n}\n\nfunction showFilteredMovies(e) {\n  if (e.target.nodeName !== 'BUTTON') return;\n  try {\n    switchOptions(e);\n    updateGenreId(e.target.dataset.id);\n    searchByGenre(1);\n  } catch (error) {}\n}\n\nfunction switchOptions(e) {\n  const currentActive = document.querySelector('.filter__option.active');\n  currentActive && currentActive.classList.remove('active');\n  e.target.classList.add('active');\n}\n\nexport { addFilter };\n","import { addFilter } from '../filter';\nimport { createSwitcherMarkup } from './trending-switcher';\n\n\nconst gallery = document.querySelector('.gallery');\nconst settingsMarkup = `\n<div class=\"gallery__settings\">\n  <div class=\"gallery__settings-container\">\n    <button class=\"filter__button\" type=\"button\">Select genre</button>\n  </div>\n  <ul class=\"filter__list is-hidden\"></ul>\n</div>`;\ngallery.insertAdjacentHTML(\"beforebegin\", settingsMarkup);\nconst container = document.querySelector('.gallery__settings-container');\n\ncreateSwitcherMarkup(container);\naddFilter();\n\n"],"names":["parcelRequire","$bpxeT","$8nrFW","$0752efe90e900891$export$da0c8716dc13cd97","localStorage","getItem","$df01db9501f35ba8$export$a02e51d251069742","$df01db9501f35ba8$export$e5a9f6b139a869b8","$4wcYQ","paginator","callback","$df01db9501f35ba8$var$_showTrending","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","page","data","_args","length","$hOsrK","getTrending","_ctx","sent","$fiCwh","makeGallery","results","currentPage","totalPages","total_pages","console","log","t0","$e7e76bc70a64536c$var$loadSpinnerBtn","$kI89v","LoadSpinner","selector","$e7e76bc70a64536c$var$headerForm","document","querySelector","$e7e76bc70a64536c$var$searchResult","$e7e76bc70a64536c$var$lastQuery","$e7e76bc70a64536c$var$searchMore","n","$e7e76bc70a64536c$var$getMovies","query","ref","searched","enable","getMoviesByKeyword","keyword","textContent","$e7e76bc70a64536c$var$clearInfo","disable","addEventListener","event","preventDefault","value","target","trim","setTimeout","$hdbOA","$5a79d6a54134d65b$var$options","$5a79d6a54134d65b$var$showHideFilter","e","classList","toggle","optionsMarkup","JSON","parse","map","param","id","name","concat","join","innerHTML","$5a79d6a54134d65b$var$showFilteredMovies","nodeName","currentActive","remove","add","$5a79d6a54134d65b$var$switchOptions","updateGenreId","dataset","searchByGenre","error","insertAdjacentHTML","container","switcher","options","querySelectorAll","optionToSelect","find","option","checked","setItem"],"version":3,"file":"index.8495a0ed.js.map"}