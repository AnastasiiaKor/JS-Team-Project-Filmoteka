{"mappings":"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","sources":["src/index.js","src/main.js/trending.js","src/main.js/get-movies-by-genre.js","src/main.js/templates.js/trending-switcher.js","src/main.js/search.js","src/main.js/loader.js"],"sourcesContent":["// import './main.js/preloader';\nimport './main.js/requests';\nimport './main.js/saveGenres';\nimport './main.js/trending';\nimport './main.js/search';\nimport './main.js/modal';\n/* import './main.js/login'; */\nimport './main.js/user-manager';\nimport './main.js/theme-switcher';\nimport './main.js/local-storage';\nimport './main.js/footer-modal';\nimport './main.js/back-to-top';\n/* import './main.js/library-manager'; */\n","import { getTrending } from './requests';\nimport { addSearchByGenre } from './get-movies-by-genre';\nimport { gallery, createGalleryMarkup } from './templates.js/gallery-markup';\nimport { period, createSwitcherMarkup } from './templates.js/trending-switcher';\nimport { paginator } from './paginator';\n\nshowTrending(1, period);\n\npaginator.callback = showTrending;\n\nasync function showTrending(page = 1, timeWindow = period) {\n  try {\n    const data = await getTrending(page, timeWindow);\n    const markup = await createGalleryMarkup(data.results);\n\n    gallery.innerHTML = markup;\n    paginator.currentPage = data.page;\n    paginator.totalPages = data.total_pages;\n\n    createSwitcherMarkup(showTrending);\n    addSearchByGenre();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport { showTrending };\n","import { getMovieBYGenre } from './requests';\nimport { gallery, createGalleryMarkup } from './templates.js/gallery-markup';\nimport { paginator } from './paginator';\n\nlet genreID;\n\naddSearchByGenre();\n\nconst searchByGenre = async page => {\n  try {\n    const data = await getMovieBYGenre(genreID, page);\n    const markup = createGalleryMarkup(data.results);\n    gallery.innerHTML = markup;\n    gallery.scrollIntoView();\n    paginator.currentPage = data.page;\n    paginator.totalPages = data.total_pages < 500 ? data.total_pages : 500;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nfunction addSearchByGenre(page = 1) {\n  gallery.addEventListener('click', async e => {\n    e.preventDefault();\n    if (!e.target.className.includes('genre-link')) return;\n    e.stopImmediatePropagation();\n    genreID = e.target.dataset.id;\n    paginator.callback = searchByGenre;\n    searchByGenre(page);\n  });\n}\n\nexport { addSearchByGenre };\n","import { gallery } from './gallery-markup';\n\nlet period = localStorage.getItem('switcher-period') || 'week';\n\nfunction createSwitcherMarkup(callback) {\n  const markup = `<div class=\"switcher__container\">\n    <span class=\"switcher__text\">Trending of the</span>\n        <div class=\"switcher\">\n          <div class=\"switcher__item\">\n            <input\n              type=\"radio\"\n              id=\"day\"\n              value=\"day\"\n              name=\"switcher\"\n              class=\"switcher__item-radio\"\n            />\n            <label for=\"day\" class=\"switcher__item-label\">\n              Day\n            </label>\n          </div>\n          <div class=\"switcher__item\">\n            <input\n              type=\"radio\"\n              id=\"week\"\n              value=\"week\"\n              name=\"switcher\"\n              class=\"switcher__item-radio\"\n            />\n            <label for=\"week\" class=\"switcher__item-label\">\n              Week\n            </label>\n          </div>\n        </div>\n    </div>`;\n\n  gallery.insertAdjacentHTML('afterbegin', markup);\n  const switcher = document.querySelector('.switcher');\n  const options = switcher.querySelectorAll('.switcher__item-radio');\n\n  switcher.addEventListener('click', addSwitcher);\n  [...options].find(option => option.value === period).checked = true;\n\n  function addSwitcher(e) {\n    const optionToSelect = [...options].find(option => !option.checked);\n    optionToSelect.checked = true;\n\n    period = optionToSelect.value;\n\n    localStorage.setItem('switcher-period', period);\n\n    callback(1, period);\n  }\n}\n\nexport { period, createSwitcherMarkup };\n","import { getMovie } from './get-movie';\nimport { getMoviesByKeyword } from './requests';\nimport { gallery, createGalleryMarkup } from './templates.js/gallery-markup';\nimport { paginator } from './paginator';\nimport { LoadSpinner } from './loader';\n\nconst loadSpinnerBtn = new LoadSpinner({ selector: '[data-action=\"loading\"]' });\nconst headerForm = document.querySelector('.search-form');\nconst searchResult = document.querySelector('.search-result');\nconst WARNING_CLEAR_DELAY = 3000;\nlet lastQuery = '';\nconst searchMore = n => {\n  getMovies(lastQuery, n);\n};\nconst getMovies = async (query, page) => {\n  loadSpinnerBtn.enable();\n  let searched = await getMoviesByKeyword({\n    keyword: query,\n    page,\n  });\n  if (searched?.results?.length) {\n    const markup = createGalleryMarkup(searched.results);\n    searchResult.textContent = '';\n    gallery.innerHTML = markup;\n    gallery.scrollIntoView();\n    lastQuery = query;\n    paginator.callback = searchMore;\n    paginator.currentPage = searched.page;\n    paginator.totalPages = searched.total_pages;\n  } else {\n    searchResult.textContent =\n      'Search result not successful. Enter the correct movie name and try again.';\n    clearInfo();\n  }\n  loadSpinnerBtn.disable();\n};\n\n/* async function searchMovies(event) {\n  event.preventDefault();\n  try {\n    const value = event.target['search-film'].value;\n    let serched = {};\n    if (value) {\n      getMovies(value, 1);\n      serched = await getMoviesByKeyword({\n        keyword: value,\n        page: 1,\n      });\n    } else {\n      searchResult.textContent = 'Movie name must not be empty. Please, enter movie name to search.';\n      clearInfo();\n    }\n    if (serched?.results?.length) {\n      console.log(serched);\n      const markup = createGalleryMarkup(serched.results);\n      searchResult.innerHTML = '';\n      gallery.innerHTML = markup;\n    } else if (value) {\n      searchResult.innerHTML =\n        'Search result not successful. Enter the correct movie name and try again.';\n      clearInfo();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n} */\n\nconst onSearch = event => {\n  event.preventDefault();\n\n  const value = event.target['search-film'].value.trim();\n  if (value) {\n    getMovies(value, 1);\n  } else {\n    searchResult.textContent =\n      'Movie name must not be empty. Please, enter movie name to search.';\n    clearInfo();\n    //loadSpinnerBtn.enable();\n  }\n};\n\nheaderForm.addEventListener('submit', onSearch);\n\nconst clearInfo = () => {\n  setTimeout(() => {\n    searchResult.textContent = '';\n  }, WARNING_CLEAR_DELAY);\n};\n","class LoadSpinner {\n  constructor({ selector }) {\n    this.refs = this.getRefs(selector);\n  }\n\n  getRefs(selector) {\n    const refs = {};\n    refs.button = document.querySelector(selector);\n    refs.icon = refs.button.querySelector('.search-form__icon');\n    // refs.label = refs.button.querySelector('.label');\n    refs.spinner = refs.button.querySelector('.spinner');\n\n    return refs;\n  }\n\n  disable() {\n    this.refs.button.disabled = false;\n    // this.refs.label.textContent = 'Loading...';\n    this.refs.spinner.classList.add('is-hidden');\n    this.refs.icon.classList.remove('is-hidden');\n  }\n\n  enable() {\n    this.refs.button.disabled = true;\n    // this.refs.label.textContent = 'Loading...';\n    this.refs.spinner.classList.remove('is-hidden');\n    this.refs.icon.classList.add('is-hidden');\n  }\n}\n\nexport { LoadSpinner };\n\n\n//Код для перевикористання класу\n\n// import { LoadSpinner } from './loader';\n// const loadSpinnerBtn = new LoadSpinner({ selector: '[data-action=\"loading\"]' });\n\n// loadSpinnerBtn.enable();\n// loadSpinnerBtn.disable();"],"names":["parcelRequire","$c87cd0c2a48add4a$var$genreID","$bpxeT","$c87cd0c2a48add4a$export$7d04e14c37dd5da9","$c87cd0c2a48add4a$var$searchByGenre","$parcel$interopDefault","$2TvXO","mark","_callee","page","data","markup","$hOsrK","getMovieBYGenre","_ctx","sent","$9xIcH","createGalleryMarkup","results","gallery","innerHTML","scrollIntoView","$4wcYQ","paginator","currentPage","totalPages","total_pages","console","log","t0","arguments","length","addEventListener","e","preventDefault","target","className","includes","stopImmediatePropagation","dataset","id","callback","$8nrFW","$0752efe90e900891$export$da0c8716dc13cd97","localStorage","getItem","$0752efe90e900891$export$854668381982e3df","insertAdjacentHTML","switcher","document","querySelector","options","querySelectorAll","optionToSelect","find","option","checked","value","setItem","$df01db9501f35ba8$export$a02e51d251069742","$df01db9501f35ba8$var$_showTrending","apply","this","timeWindow","_args","getTrending","$8MBJY","$e7e76bc70a64536c$var$loadSpinnerBtn","LoadSpinner","param","selector","refs","getRefs","key","button","icon","spinner","disabled","classList","add","remove","$e7e76bc70a64536c$var$headerForm","$e7e76bc70a64536c$var$searchResult","$e7e76bc70a64536c$var$lastQuery","$e7e76bc70a64536c$var$searchMore","n","$e7e76bc70a64536c$var$getMovies","query","ref","searched","enable","getMoviesByKeyword","keyword","textContent","$e7e76bc70a64536c$var$clearInfo","disable","event","trim","setTimeout"],"version":3,"file":"index.abba7dcb.js.map"}