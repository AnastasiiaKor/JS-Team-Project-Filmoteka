!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a("9LQ4c"),a("hOsrK"),a("6Yg2l");var i=a("bpxeT"),c=a("2TvXO"),o=a("hOsrK"),l=a("8nrFW"),s=localStorage.getItem("switcher-period")||"week";function u(t,n){n.insertAdjacentHTML("beforeend",'<div class="switcher__container">\n    <span class="switcher__text">Trending of the</span>\n        <div class="switcher">\n          <div class="switcher__item">\n            <input\n              type="radio"\n              id="day"\n              value="day"\n              name="switcher"\n              class="switcher__item-radio"\n            />\n            <label for="day" class="switcher__item-label">\n              Day\n            </label>\n          </div>\n          <div class="switcher__item">\n            <input\n              type="radio"\n              id="week"\n              value="week"\n              name="switcher"\n              class="switcher__item-radio"\n            />\n            <label for="week" class="switcher__item-label">\n              Week\n            </label>\n          </div>\n        </div>\n    </div>');var r=document.querySelector(".switcher"),a=r.querySelectorAll(".switcher__item-radio");r.addEventListener("click",(function(n){var r=e(l)(a).find((function(e){return!e.checked}));r.checked=!0,s=r.value,localStorage.setItem("switcher-period",s),t(1,s)})),e(l)(a).find((function(e){return e.value===s})).checked=!0}var d,p=a("4wcYQ"),f=a("fiCwh"),g=a("9xIcH"),v=(i=a("bpxeT"),c=a("2TvXO"),o=a("hOsrK"),f=a("fiCwh"),p=a("4wcYQ"),document.querySelector(".filter__list"));function h(e){e.target.classList.toggle("active"),v.classList.toggle("is-hidden");var t=JSON.parse(localStorage.getItem("genres")).map((function(e){var t=e.id,n=e.name;return'<li class="filter__item"><button class="filter__option" type="button" data-id="'.concat(t,'">').concat(n,"</button></li>")})).join("");v.innerHTML=t,v.addEventListener("click",_)}function _(e){if("BUTTON"===e.target.nodeName)try{!function(e){var t=document.querySelector(".filter__option.active");t&&t.classList.remove("active"),e.target.classList.add("active")}(e),d=e.target.dataset.id,m(1),p.paginator.callback=m}catch(e){}}function m(e){return w.apply(this,arguments)}function w(){return(w=e(i)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.getMovieBYGenre)(d,n);case 3:r=e.sent,(0,f.makeGallery)(r.results),y(),p.paginator.currentPage=r.page,p.paginator.totalPages=r.total_pages<500?r.total_pages:500,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function y(){g.gallery.insertAdjacentHTML("afterbegin",'\n      <div class="gallery__settings">\n        <div class="gallery__settings-container">\n          <button class="filter__button" type="button">Select genre</button>\n        </div>\n        <ul class="filter__list is-hidden"></ul>\n      </div>'),u(b,document.querySelector(".gallery__settings-container")),v=document.querySelector(".filter__list"),document.querySelector(".filter__button").addEventListener("click",h)}function b(){return k.apply(this,arguments)}function k(){return k=e(i)(e(c).mark((function t(){var n,r,a,i=arguments;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:1,r=i.length>1&&void 0!==i[1]?i[1]:s,e.prev=1,e.next=4,(0,o.getTrending)(n,r);case 4:a=e.sent,(0,f.makeGallery)(a.results),y(),p.paginator.currentPage=a.page,p.paginator.totalPages=a.total_pages,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),t,null,[[1,11]])}))),k.apply(this,arguments)}b(1,s),p.paginator.callback=b;i=a("bpxeT"),c=a("2TvXO"),o=a("hOsrK"),p=a("4wcYQ");var x,T=a("kI89v"),L=(f=a("fiCwh"),new(0,T.LoadSpinner)({selector:'[data-action="loading"]'})),S=document.querySelector(".search-form"),q=document.querySelector(".search-result"),O="",C=function(e){E(O,e)},E=(x=e(i)(e(c).mark((function t(n,r){var a,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.enable(),e.next=4,(0,o.getMoviesByKeyword)({keyword:n,page:r});case 4:(null==(i=e.sent)||null===(a=i.results)||void 0===a?void 0:a.length)?((0,f.makeGallery)(i.results),q.textContent="",O=n,p.paginator.callback=C,p.paginator.currentPage=i.page,p.paginator.totalPages=i.total_pages):(q.textContent="Search result not successful. Enter the correct movie name and try again.",M()),L.disable();case 7:case"end":return e.stop()}}),t)}))),function(e,t){return x.apply(this,arguments)});S.addEventListener("submit",(function(e){e.preventDefault();var t=e.target["search-film"].value.trim();t?E(t,1):(q.textContent="Movie name must not be empty. Please, enter movie name to search.",M())}));var M=function(){setTimeout((function(){q.textContent=""}),3e3)};a("7uZ1r"),a("jUlpL"),a("k6LBo"),a("elFEq"),a("dt3WK"),a("j61u5")}();
//# sourceMappingURL=index.b01a7f99.js.map
