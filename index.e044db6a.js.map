{"mappings":"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","sources":["src/index.js","src/main.js/trending.js","src/main.js/templates.js/trending-switcher.js","src/main.js/search.js","src/main.js/loader.js","src/main.js/local-storage.js"],"sourcesContent":["// import './main.js/preloader';\nimport './main.js/requests';\nimport './main.js/saveGenres';\nimport './main.js/trending';\nimport './main.js/search';\nimport './main.js/modal';\nimport './main.js/get-movies-by-genre';\n/* import './main.js/login'; */\nimport './main.js/user-manager';\nimport './main.js/theme-switcher';\nimport './main.js/local-storage';\nimport './main.js/footer-modal';\nimport './main.js/back-to-top';\n/* import './main.js/library-manager'; */\n","import { getTrending } from './requests';\nimport { period, createSwitcherMarkup } from './templates.js/trending-switcher';\nimport { paginator } from './paginator';\nimport { makeGallery } from './make-gallery';\n\nshowTrending(1, period);\n\npaginator.callback = showTrending;\n\nasync function showTrending(page = 1, timeWindow = period) {\n  try {\n    const data = await getTrending(page, timeWindow);\n    makeGallery(data.results);\n    \n    paginator.currentPage = data.page;\n    paginator.totalPages = data.total_pages;\n\n    createSwitcherMarkup(showTrending);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport { showTrending };\n","const gallery = document.querySelector('.gallery');\nlet period = localStorage.getItem('switcher-period') || 'week';\n\nfunction createSwitcherMarkup(callback) {\n  const markup = `<div class=\"switcher__container\">\n    <span class=\"switcher__text\">Trending of the</span>\n        <div class=\"switcher\">\n          <div class=\"switcher__item\">\n            <input\n              type=\"radio\"\n              id=\"day\"\n              value=\"day\"\n              name=\"switcher\"\n              class=\"switcher__item-radio\"\n            />\n            <label for=\"day\" class=\"switcher__item-label\">\n              Day\n            </label>\n          </div>\n          <div class=\"switcher__item\">\n            <input\n              type=\"radio\"\n              id=\"week\"\n              value=\"week\"\n              name=\"switcher\"\n              class=\"switcher__item-radio\"\n            />\n            <label for=\"week\" class=\"switcher__item-label\">\n              Week\n            </label>\n          </div>\n        </div>\n    </div>`;\n\n  gallery.insertAdjacentHTML('afterbegin', markup);\n  const switcher = document.querySelector('.switcher');\n  const options = switcher.querySelectorAll('.switcher__item-radio');\n\n  switcher.addEventListener('click', addSwitcher);\n  [...options].find(option => option.value === period).checked = true;\n\n  function addSwitcher(e) {\n    const optionToSelect = [...options].find(option => !option.checked);\n    optionToSelect.checked = true;\n\n    period = optionToSelect.value;\n\n    localStorage.setItem('switcher-period', period);\n\n    callback(1, period);\n  }\n}\n\nexport { period, createSwitcherMarkup };\n","import { getMoviesByKeyword } from './requests';\nimport { paginator } from './paginator';\nimport { LoadSpinner } from './loader';\nimport { makeGallery } from './make-gallery';\n\nconst loadSpinnerBtn = new LoadSpinner({ selector: '[data-action=\"loading\"]' });\nconst headerForm = document.querySelector('.search-form');\nconst searchResult = document.querySelector('.search-result');\nconst WARNING_CLEAR_DELAY = 3000;\nlet lastQuery = '';\nconst searchMore = n => {\n  getMovies(lastQuery, n);\n};\nconst getMovies = async (query, page) => {\n  loadSpinnerBtn.enable();\n  let searched = await getMoviesByKeyword({\n    keyword: query,\n    page,\n  });\n  if (searched?.results?.length) {\n    makeGallery(searched.results);\n    searchResult.textContent = '';\n    lastQuery = query;\n    paginator.callback = searchMore;\n    paginator.currentPage = searched.page;\n    paginator.totalPages = searched.total_pages;\n  } else {\n    searchResult.textContent =\n      'Search result not successful. Enter the correct movie name and try again.';\n    clearInfo();\n  }\n  loadSpinnerBtn.disable();\n};\n\n\nconst onSearch = event => {\n  event.preventDefault();\n\n  const value = event.target['search-film'].value.trim();\n  if (value) {\n    getMovies(value, 1);\n  } else {\n    searchResult.textContent =\n      'Movie name must not be empty. Please, enter movie name to search.';\n    clearInfo();\n  }\n};\n\nheaderForm.addEventListener('submit', onSearch);\n\nconst clearInfo = () => {\n  setTimeout(() => {\n    searchResult.textContent = '';\n  }, WARNING_CLEAR_DELAY);\n};\n","class LoadSpinner {\n  constructor({ selector }) {\n    this.refs = this.getRefs(selector);\n  }\n\n  getRefs(selector) {\n    const refs = {};\n    refs.button = document.querySelector(selector);\n    refs.icon = refs.button.querySelector('.search-form__icon');\n    // refs.label = refs.button.querySelector('.label');\n    refs.spinner = refs.button.querySelector('.spinner');\n\n    return refs;\n  }\n\n  disable() {\n    this.refs.button.disabled = false;\n    // this.refs.label.textContent = 'Loading...';\n    this.refs.spinner.classList.add('is-hidden');\n    this.refs.icon.classList.remove('is-hidden');\n  }\n\n  enable() {\n    this.refs.button.disabled = true;\n    // this.refs.label.textContent = 'Loading...';\n    this.refs.spinner.classList.remove('is-hidden');\n    this.refs.icon.classList.add('is-hidden');\n  }\n}\n\nexport { LoadSpinner };\n\n\n//Код для перевикористання класу\n\n// import { LoadSpinner } from './loader';\n// const loadSpinnerBtn = new LoadSpinner({ selector: '[data-action=\"loading\"]' });\n\n// loadSpinnerBtn.enable();\n// loadSpinnerBtn.disable();","import { setMovie, removeMovie, init } from './firebase';\n/* init(); */\nfunction setLocalStorage(data) {\n  const btnAddList = document.querySelector('.js-btn-add-list');\n  const btnAddToWatched = document.querySelector('[data-addto=\"watched\"]');\n  const btnAddToQueue = document.querySelector('[data-addto=\"queue\"]');\n  const userName = localStorage.getItem('user');\n\n  if (!userName) {\n    btnAddToWatched.setAttribute('disabled', true);\n    btnAddToQueue.setAttribute('disabled', true);\n  }\n\n  checkLS();\n\n  data.genre_ids = data.genres.map(g => g.id);\n\n  btnAddList.addEventListener('click', onBtnClick);\n\n  function onBtnClick(event) {\n    if (!event.target.hasAttribute('data-addto')) return;\n\n    const lsKey = `${userName}_${event.target.dataset.addto}`;\n\n    if (!localStorage.getItem(lsKey)) {\n      localStorage.setItem(lsKey, JSON.stringify([data]));\n      console.log(lsKey);\n\n      checkLS();\n\n      return;\n    }\n\n    let lsValue = JSON.parse(localStorage.getItem(lsKey));\n    const indForDel = lsValue.findIndex(fiml => fiml.id === data.id);\n\n    if (!!~indForDel) {\n      lsValue.splice(indForDel, 1);\n      localStorage.setItem(lsKey, JSON.stringify(lsValue));\n    } else {\n      lsValue.push(data);\n      localStorage.setItem(lsKey, JSON.stringify(lsValue));\n    }\n\n    checkLS();\n  }\n\n  function checkLS() {\n    if (localStorage.getItem(`${userName}_watched`)) {\n      let lsWatchedValue = JSON.parse(\n        localStorage.getItem(`${userName}_watched`)\n      );\n      const indInLS = lsWatchedValue.findIndex(fiml => fiml.id === data.id);\n\n      if (!!~indInLS) {\n        btnAddToWatched.textContent = `Remove from wached`;\n      } else {\n        btnAddToWatched.textContent = `Add to wached`;\n      }\n    }\n\n    if (localStorage.getItem(`${userName}_queue`)) {\n      let lsQueueValue = JSON.parse(localStorage.getItem(`${userName}_queue`));\n      const indInLS = lsQueueValue.findIndex(fiml => fiml.id === data.id);\n\n      if (!!~indInLS) {\n        btnAddToQueue.textContent = `Remove from queue`;\n      } else {\n        btnAddToQueue.textContent = `Add to queue`;\n      }\n    }\n  }\n}\n\nexport { setLocalStorage };\n"],"names":["parcelRequire","$bpxeT","$8nrFW","$0752efe90e900891$var$gallery","document","querySelector","$0752efe90e900891$export$da0c8716dc13cd97","localStorage","getItem","$0752efe90e900891$export$854668381982e3df","callback","insertAdjacentHTML","switcher","options","querySelectorAll","addEventListener","e","optionToSelect","$parcel$interopDefault","find","option","checked","value","setItem","$df01db9501f35ba8$export$a02e51d251069742","$df01db9501f35ba8$var$_showTrending","apply","this","arguments","$2TvXO","mark","_callee","page","timeWindow","data","_args","length","$hOsrK","getTrending","_ctx","sent","$fiCwh","makeGallery","results","$4wcYQ","paginator","currentPage","totalPages","total_pages","console","log","t0","$8MBJY","$f13e3d9c343fb2a1$export$27418fc3a8c48d17","LoadSpinner","param","selector","refs","getRefs","key","button","icon","spinner","disabled","classList","add","remove","$e7e76bc70a64536c$var$loadSpinnerBtn","$e7e76bc70a64536c$var$headerForm","$e7e76bc70a64536c$var$searchResult","$e7e76bc70a64536c$var$lastQuery","$e7e76bc70a64536c$var$searchMore","n","$e7e76bc70a64536c$var$getMovies","query","ref","searched","enable","getMoviesByKeyword","keyword","textContent","$e7e76bc70a64536c$var$clearInfo","disable","event","preventDefault","target","trim","setTimeout"],"version":3,"file":"index.e044db6a.js.map"}